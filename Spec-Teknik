
SPEC-TEKNIK FOR RUNNING OLLAMA WITH NVIDIA AND CUDA

______________________________________________________________________________________________________
NVIDIA

--> cat /proc/driver/nvidia/version

--> update-pciids

--> lspci | grep -i nvidia
01:00.0 3D controller: NVIDIA Corporation GP107M [GeForce GTX 1050 Mobile] (rev a1)

--> nvidia-smi

--> wget https://developer.download.nvidia.com/compute/cuda/repos/debian12/x86_64/cuda-keyring_1.1-1_all.deb
--> dpkg -i cuda-keyring_1.1-1_all.deb
--> apt update
--> apt install -y nvidia-driver cuda

--> lsmod | grep nvidia
--> apt install --reinstall nvidia-kernel-dkms
--> modprobe nvidia
--> nvidia-smi
--> nvcc --version

find /etc -name '*nvidia*' -exec rm -rf {} +
find /lib/modules -name '*nvidia*' -exec rm -rf {} +
find /usr -name '*nvidia*' -exec rm -rf {} +

update-initramfs -u
reboot

apt purge '*nvidia*' cuda*
apt autoremove
apt update
sudo apt install -y nvidia-legacy-470-driver nvidia-kernel-dkms

______________________________________________________________________________________________________
CUDA

https://developer.nvidia.com/cuda-downloads?target_os=Linux&target_arch=x86_64&Distribution=Debian&target_version=12&target_type=deb_local

https://developer.download.nvidia.com/compute/cuda/11.4.0/local_installers/cuda-repo-debian10-11-4-local_11.4.0-470.42.01-1_amd64.deb
dpkg -i cuda-repo-debian12-12-9-local_12.9.0-575.51.03-1_amd64.deb
cp /var/cuda-repo-debian12-12-9-local/cuda-*-keyring.gpg /usr/share/keyrings/
apt-get update
apt-get -y install cuda-toolkit-12-9

apt-key add /var/cuda-repo-debian10-11-4-local/7fa2af80.pub
apt-get install cuda

















